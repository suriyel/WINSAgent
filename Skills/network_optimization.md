---
name: network_optimization
title: 网络优化仿真分析
description: 完整的网络问题分析和优化仿真对比流程，适用于弱覆盖、干扰、容量等问题分析
triggers:
  - 弱覆盖
  - 干扰
  - 容量
  - 切换
  - 优化
  - 仿真
  - 根因分析
  - 网络问题
  - 分析
priority: 100
---

## 工具编排流程

按照以下顺序执行分析：

### 步骤 1：领域知识检索
- 调用 `search_terminology` 查询用户提及问题类型的术语和指标定义
- 调用 `search_design_doc` 获取对应的分析流程文档

### 步骤 2：场景匹配
- 调用 `match_scenario` 匹配数字孪生场景
- 获取 `digitaltwinsId` 用于后续查询

### 步骤 3：根因分析
- 调用 `query_root_cause_analysis` 查询根因分析结果
- 根据步骤 1 的术语检索结果，选择与用户问题相关的指标

### 步骤 4：固定提示（必须遵守）
展示根因分析结果后，**必须**输出以下固定提示语（一字不差）：

**"根因分析完成。是否需要对该场景进行优化仿真？"**

### 步骤 5：优化仿真（用户确认后）
- 调用 `query_simulation_results` 查询仿真结果

### 步骤 6：可视化对比（可选）
- 调用 `compare_simulation_data` 生成对比图表

## 指标选择规则

根据用户意图选择相关指标：

| 问题类型 | 相关指标 |
|---------|---------|
| 弱覆盖 | RSRP、MR覆盖率、覆盖电平 |
| 干扰 | SINR、RSRQ、重叠覆盖度 |
| 容量 | PRB利用率、下行流量、用户数 |

## 分析粒度

每次分析考虑两种粒度：
- **小区级(cell)**：以基站小区为最小分析单元，包含小区id、经纬度和小区级指标
- **栅格级(grid)**：以地理栅格为最小分析单元，包含经纬度和栅格级指标

根据 `search_design_doc` 返回的流程文档，确定执行哪种粒度的分析。

## 图表类型选择

调用 `compare_simulation_data` 时选择合适的图表类型：
- `grouped_bar_chart`：分组柱状图（默认推荐）— 适用于分组对比分析
- `line_chart`：折线图 — 展示指标随小区变化的趋势对比
- `stacked_bar_chart`：堆叠柱状图 — 展示优化前后指标叠加的总量对比
- `scatter_plot`：散点图 — 探索优化前后数值关系、检测异常小区
- `heatmap`：热力图 — 大规模数据集的差值分布可视化
- `table`：表格 — 查看精确数值
