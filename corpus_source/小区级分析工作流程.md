# 小区级网络优化分析工作流程

## 概述

小区级分析以基站小区为最小分析单元，适用于评估单个小区的整体性能、识别小区级问题和制定小区级优化方案。小区级分析的结果包含小区ID和相关的小区级指标数据，不包含经纬度坐标信息。

## 适用场景

- 评估特定小区的整体性能水平
- 识别小区级覆盖、干扰、容量问题
- 分析小区运行指标趋势
- 制定小区级优化方案
- 对比优化前后小区指标变化

## 小区级可用指标

### 根因分析指标（优化前）

| 指标名称 | 单位 | 说明 | 关联问题类型 |
|----------|------|------|-------------|
| RSRP均值(dBm) | dBm | 小区内所有采样点的RSRP平均值 | 弱覆盖 |
| MR覆盖率(%) | % | RSRP达标采样点占比 | 弱覆盖 |
| SINR均值(dB) | dB | 小区内所有采样点的SINR平均值 | 干扰 |
| RSRQ(dB) | dB | 参考信号接收质量平均值 | 干扰 |
| 下行PRB利用率(%) | % | 下行物理资源块占用率 | 容量不足 |
| 上行PRB利用率(%) | % | 上行物理资源块占用率 | 容量不足 |
| RRC连接成功率(%) | % | RRC连接建立成功率 | 接入问题 |
| 切换成功率(%) | % | 小区切换成功率 | 切换问题 |
| 下行流量(GB) | GB | 小区下行数据流量 | 负荷评估 |
| 上行流量(GB) | GB | 小区上行数据流量 | 负荷评估 |
| 用户数 | 个 | 小区在线用户数 | 负荷评估 |

### 仿真结果指标（优化后）

| 指标名称 | 单位 | 说明 |
|----------|------|------|
| 仿真RSRP均值(dBm) | dBm | 优化后预测的小区RSRP均值 |
| 仿真MR覆盖率(%) | % | 优化后预测的MR覆盖率 |
| 仿真SINR均值(dB) | dB | 优化后预测的小区SINR均值 |
| 仿真RSRQ(dB) | dB | 优化后预测的RSRQ |
| 仿真下行PRB利用率(%) | % | 优化后预测的下行PRB利用率 |
| 仿真上行PRB利用率(%) | % | 优化后预测的上行PRB利用率 |
| 仿真RRC连接成功率(%) | % | 优化后预测的RRC连接成功率 |
| 仿真切换成功率(%) | % | 优化后预测的切换成功率 |
| 仿真下行流量(GB) | GB | 优化后预测的下行流量 |
| 仿真上行流量(GB) | GB | 优化后预测的上行流量 |

## 小区级分析流程

### 步骤1：术语检索

调用 `search_terminology` 工具，查询用户提及的问题类型，获取相关指标定义和对应的小区级指标名称。

**示例查询：**
```
用户：小区A的覆盖情况如何？
→ search_terminology("覆盖")
→ 返回：弱覆盖定义、相关指标（RSRP均值、MR覆盖率）
```

### 步骤2：场景匹配

调用 `match_scenario` 工具，根据用户提供的区域名称和问题描述，匹配对应的数字孪生场景，获取 `digitaltwinsId`。

**示例查询：**
```
用户：分析商业区的小区覆盖
→ match_scenario("商业区")
→ 返回：digitaltwinsId = "DT_001"
```

### 步骤3：小区级根因分析

调用 `query_root_cause_analysis` 工具，参数设置：
- `digitaltwins_id`: 步骤2获取的场景ID
- `level`: "cell"
- `cell_ids`: 指定分析的小区ID列表（可选，不指定则分析所有小区）
- `indicators`: 根据步骤1的术语检索结果，选择与用户问题相关的小区级指标

**示例请求：**
```
query_root_cause_analysis(
  digitaltwins_id="DT_001",
  level="cell",
  cell_ids=["CELL_001", "CELL_002"],
  indicators=["RSRP均值(dBm)", "MR覆盖率(%)"]
)
```

**返回结果示例：**
```json
{
  "cells": [
    {
      "cell_id": "CELL_001",
      "rsrp_mean": -98.5,
      "mr_coverage": 85.3,
      "assessment": "覆盖良好"
    },
    {
      "cell_id": "CELL_002",
      "rsrp_mean": -112.3,
      "mr_coverage": 62.1,
      "assessment": "存在弱覆盖问题"
    }
  ],
  "summary": "共分析2个小区，CELL_002存在弱覆盖问题"
}
```

### 步骤4：结果解读与优化建议

展示根因分析结果，解读关键发现：
- 识别存在问题的的小区
- 分析问题严重程度
- 提供初步优化方向

**必须**输出固定提示语：
```
根因分析完成。是否需要对该场景进行优化仿真？
```

### 步骤5：优化仿真（用户确认后）

如用户确认需要优化，调用 `query_simulation_results` 工具，参数设置：
- `digitaltwins_id`: 同一场景ID
- `level`: "cell"
- `cell_ids`: 与根因分析相同的小区ID列表
- `indicators`: 选择与根因分析对应的仿真指标

**示例请求：**
```
query_simulation_results(
  digitaltwins_id="DT_001",
  level="cell",
  cell_ids=["CELL_001", "CELL_002"],
  indicators=["仿真RSRP均值(dBm)", "仿真MR覆盖率(%)"]
)
```

### 步骤6：优化效果对比

对比根因分析和仿真结果中同类指标的数值变化，总结优化方案的预期改善效果。

**对比示例：**
| 小区ID | 指标 | 优化前 | 优化后 | 改善 |
|--------|------|--------|--------|------|
| CELL_002 | RSRP均值(dBm) | -112.3 | -105.2 | +7.1 |
| CELL_002 | MR覆盖率(%) | 62.1 | 78.5 | +16.4 |

## 小区级问题判定标准

### 弱覆盖

- RSRP均值 < -110 dBm
- 或 MR覆盖率 < 70%

### 干扰

- SINR均值 < 0 dB
- 或 RSRQ < -15 dB

### 容量不足

- 下行PRB利用率 > 80%
- 或 上行PRB利用率 > 70%

### 接入问题

- RRC连接成功率 < 95%

### 切换问题

- 切换成功率 < 98%

## 常见优化方案

### 覆盖问题优化

| 方案 | 适用场景 | 预期效果 |
|------|----------|----------|
| 增加基站 | 大面积弱覆盖 | RSRP提升 5~10 dB |
| 调整倾角 | 局部越区或弱覆盖 | RSRP改善 3~5 dB |
| 优化功率 | 功率配置不合理 | 覆盖范围调整 |
| 室内分布 | 室内弱覆盖 | 室内信号提升 10~15 dB |

### 干扰问题优化

| 方案 | 适用场景 | 预期效果 |
|------|----------|----------|
| 频率规划 | 同频干扰严重 | SINR提升 3~5 dB |
| ICIC协调 | 小区间干扰 | SINR提升 2~4 dB |
| 清除干扰源 | 外部干扰 | SINR恢复正常 |
| 降低越区覆盖 | 重叠覆盖度高 | SINR提升 2~3 dB |

### 容量问题优化

| 方案 | 适用场景 | 预期效果 |
|------|----------|----------|
| 载波扩容 | PRB利用率超负荷 | 容量提升 30%~50% |
| MIMO升级 | 用户密集区 | 容量提升 2~4 倍 |
| 小区分裂 | 单小区负荷过高 | 容量翻倍 |
| 负载均衡 | 小区间负荷不均 | 均衡率提升 20% |

## 注意事项

1. **指标一致性**：确保根因分析和仿真使用的指标类型一致（如根因分析使用RSRP，仿真则使用仿真RSRP）
2. **小区范围**：小区级分析不包含经纬度信息，如需地理定位请使用栅格级分析
3. **参数参考**：判定标准可根据实际网络情况调整
4. **优化前提**：优化仿真基于数字孪生场景，实际效果可能因现场条件有所差异
